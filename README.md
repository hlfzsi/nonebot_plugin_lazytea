# LazyTea是什么？

*--来喝一杯下午茶吗？*

LazyTea是适用于nonebot2的一个本地GUI实现。其进程间通信基于websocket实现，这意味着LazyTea经过简单改造后即可用于远程管理。此外，LazyTea与nonebot2高度解耦，任何定义了`ipc/func_call.py`中所有接口的框架都可以自由使用LazyTea作为GUI。本项目即为LazyTea在nonebot2的绑定。

# 为什么选择LazyTea？

LazyTea具有以下优势：

## 技术选型

* 选用PySide6作为UI支持。得益于Qt 6.x的强大跨平台能力和优异的性能，LazyTea应当能够高性能地工作在任何一台机器上。
* 选用进程方案。LazyTea作为一个由主进程派生的子进程工作，考虑到Python的背景，这意味着在绝大多数机器上，LazyTea不会与nonebot2及其插件产生竞争。此外，进程间的高度隔离使得LazyTea的崩溃不会牵连主进程，这在生产环境中十分重要。

## 用户友好

实际上，若您仅是普通用户而非开发者，那您已经不需要进一步阅读了。

* 配置文件。nonebot2的env文件本十分清晰，但纷至沓来的各类插件往往使其让人困惑。LazyTea为各个插件自动生成了配置页面，易于用户进行自定义。
* 插件管理。当前，绝大多数插件都没有实现自动更新或更新检查，LazyTea愿代为效劳。只要插件开发者遵循少量规范，LazyTea便能自动服务。（具体规范将于后文提及）
* 名单管理。受够了乱七八糟的权限管理？LazyTea提供了一套非侵入性的Matcher级权限管理方案。你可以在GUI中肆意修改，向每一个触怒您的人降下神罚。P.S 开启命令->在黑名单内->阻断；关闭命令->在白名单内->放行
* Todo  话题追踪（已实现数据记录与预处理，将在未来的版本正式启用）
* Todo  性能分析（已实现数据记录，将在未来的版本正式启用）

# 如何与LazyTea产生联动？

本部分仅需愿意联动LazyTea的插件开发者阅读。

所有联动均可参照本项目的顶层`__init__.py`。

## 关于更新检查

在插件元数据的`extra`字段中添加键值对`version`，其值为字符串，并正确设置插件主页为github项目地址，并在发版时将版本号作为tag即可。

## 关于自定义插件头像

在插件元数据的`extra`字段中添加键值对`icon_abspath`，其值应当是插件头像图片的绝对路径。我们建议尽可能缩小图片，以便于节约内存。

## 关于插件作者声明

在插件元数据的`extra`字段中添加键值对`author`，其值为字符串。

## (Todo) 关于配置页面

LazyTea已经有相关计划来允许开发者替换自动生成的配置页面，并且LazyTea已经将部分计划付诸实践。然而，这一特性将降低LazyTea的跨语言能力，同时当前nonebot2插件的实际开发并没有UI基础，因而相关计划优先度较低。

## 关于名单管理（权限管理）

名单/权限管理由LazyTea自动完成，不需要开发者自行管理。LazyTea尚无将名单/权限管理交归插件负责的计划。考虑到兼容性，LazyTea在积极接受bug反馈的同时也鼓励开发者使用规范的、常见的Rule种类，而不是自定义。
